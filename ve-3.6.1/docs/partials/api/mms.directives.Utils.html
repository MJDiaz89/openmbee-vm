<h1><code ng:non-bindable="">Utils</code>
<div><span class="hint">service in module <code ng:non-bindable="">mms.directives</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="mms-directives-utils-page"><p>Utility methods for performing edit like behavior to a transclude element
WARNING These are intended to be internal utility functions and not designed to be used as api</p>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/ng.$q">$q</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/ng.$uibModal">$uibModal</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/ng.$templateCache">$templateCache</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.WorkspaceService">WorkspaceService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.ConfigService">ConfigService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.ElementService">ElementService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/_">_</a></code>
</li>
</ul>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_addpresentationelement">addPresentationElement(scope, type, viewOrSection)</h3>
<div class="addpresentationelement"><div class="mms-directives-utils-addpresentationelement-page"><p>Utility to add a new presentation element to view or section</p>
</div><h5 id="methods_addpresentationelement_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="mms-directives-utils-addpresentationelement-page"><p>controller scope, expects $scope.ws (string) and $scope.site (object) to be there</p>
</div></td></tr><tr><td>type</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="mms-directives-utils-addpresentationelement-page"><p>type of presentation element (Paragraph, Section)</p>
</div></td></tr><tr><td>viewOrSection</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="mms-directives-utils-addpresentationelement-page"><p>the view or section (instance spec) object</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_cancelaction">cancelAction(scope, recompile, domElement)</h3>
<div class="cancelaction"><div class="mms-directives-utils-cancelaction-page"><p>called by transcludes and section, cancels edited element
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  edit - edit object
  elementSaving - boolean
  isEditing - boolean
  bbApi - button bar api - handles spinny
sets these in the scope:
  isEditing - false</p>
</div><h5 id="methods_cancelaction_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-cancelaction-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>recompile</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-cancelaction-page"><p>recompile function object</p>
</div></td></tr><tr><td>domElement</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-cancelaction-page"><p>dom of the directive, jquery wrapped</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_hasedits">hasEdits(editOb)</h3>
<div class="hasedits"><div class="mms-directives-utils-hasedits-page"><p>whether editing object has changes compared to base element,
currently compares name, doc, property values, if element is not
editable, returns false</p>
</div><h5 id="methods_hasedits_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>editOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-hasedits-page"><p>edit object</p>
</div></td></tr></tbody></table><h5 id="methods_hasedits_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-directives-utils-hasedits-page"><p>has changes or not</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_isenumeration">isEnumeration(elementOb)</h3>
<div class="isenumeration"><div class="mms-directives-utils-isenumeration-page"><p>Check if element is enumeration and if true get enumerable options</p>
</div><h5 id="methods_isenumeration_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>elementOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-isenumeration-page"><p>element object</p>
</div></td></tr></tbody></table><h5 id="methods_isenumeration_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-directives-utils-isenumeration-page"><p>promise would be resolved with options and if object is enumerable.
For unsuccessful saves, it will be rejected with an object with reason.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_previewaction">previewAction(scope, recompile, domElement)</h3>
<div class="previewaction"><div class="mms-directives-utils-previewaction-page"><p>called by transcludes and section, previews edited element
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  edit - edit object
  elementSaving - boolean
  inPreviewMode - boolean
  isEditing - boolean
  bbApi - button bar api - handles spinny
sets these in the scope:
  skipBroadcast - true
  inPreviewMode - false
  isEditing - false
  elementSaving - false</p>
</div><h5 id="methods_previewaction_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-previewaction-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>recompile</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-previewaction-page"><p>recompile function object</p>
</div></td></tr><tr><td>domElement</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-previewaction-page"><p>dom of the directive, jquery wrapped</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_reopenunsavedelts">reopenUnsavedElts(scope, transcludeType)</h3>
<div class="reopenunsavedelts"><div class="mms-directives-utils-reopenunsavedelts-page"><p>called by transcludes when users have unsaved edits, leaves that view, and comes back to that view.
the editor will reopen if there are unsaved edits.
assumes no reload.
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  ve_edits - unsaved edits object
  startEdit - pop open the editor window</p>
</div><h5 id="methods_reopenunsavedelts_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-reopenunsavedelts-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>transcludeType</td><td><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="mms-directives-utils-reopenunsavedelts-page"><p>name, documentation, or value</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_revertaction">revertAction(scope, recompile, domElement)</h3>
<div class="revertaction"><div class="mms-directives-utils-revertaction-page"><p>called by transcludes and section, cancels edited element
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  edit - edit object
  elementSaving - boolean
  isEditing - boolean
  bbApi - button bar api - handles spinny
sets these in the scope:
  isEditing - false</p>
</div><h5 id="methods_revertaction_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-revertaction-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>recompile</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-revertaction-page"><p>recompile function object</p>
</div></td></tr><tr><td>domElement</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-revertaction-page"><p>dom of the directive, jquery wrapped</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_revertedits">revertEdits(editOb, editorApi)</h3>
<div class="revertedits"><div class="mms-directives-utils-revertedits-page"><p>reset editing object back to base element values for name, doc, values</p>
</div><h5 id="methods_revertedits_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>editOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-revertedits-page"><p>scope with common properties</p>
</div></td></tr><tr><td>editorApi</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-revertedits-page"><p>editor api to kill editor if reverting changes</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_save">save(edit, editorApi, scope)</h3>
<div class="save"><div class="mms-directives-utils-save-page"><p>save edited element</p>
</div><h5 id="methods_save_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>edit</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-save-page"><p>the edit object to save</p>
</div></td></tr><tr><td>editorApi</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-save-page"><p>optional editor api</p>
</div> <p><em>(default: null)</em></p></td></tr><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-save-page"><p>angular scope that has common functions</p>
</div></td></tr></tbody></table><h5 id="methods_save_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-directives-utils-save-page"><p>promise would be resolved with updated element if save is successful.
For unsuccessful saves, it will be rejected with an object with type and message.
Type can be error or info. In case of conflict, there is an option to discard, merge,
or force save. If the user decides to discord or merge, type will be info even though
the original save failed. Error means an actual error occured.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_saveaction">saveAction(scope, domElement, continueEdit)</h3>
<div class="saveaction"><div class="mms-directives-utils-saveaction-page"><p>called by transcludes and section, saves edited element
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  elementSaving - boolean
  isEditing - boolean
  commitId - calculated commit id
  bbApi - button bar api - handles spinny
sets these in the scope:
  elementSaving - boolean</p>
</div><h5 id="methods_saveaction_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-saveaction-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>domElement</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-saveaction-page"><p>dom of the directive, jquery wrapped</p>
</div></td></tr><tr><td>continueEdit</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-directives-utils-saveaction-page"><p>save and continue</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_startedit">startEdit(scope, mmsViewCtrl, domElement, template, doNotScroll)</h3>
<div class="startedit"><div class="mms-directives-utils-startedit-page"><p>called by transcludes and section, adds the editing frame
uses these in the scope:
  element - element object for the element to edit (for sections it&#39;s the instance spec)
  isEditing - boolean
  commitId - calculated commit id
  isEnumeration - boolean
  recompileScope - child scope of directive scope
  skipBroadcast - boolean (whether to broadcast presentationElem.edit for keeping track of open edits)
sets these in the scope:
  edit - editable element object
  isEditing - true
  inPreviewMode - false
  editValues - array of editable values (for element that are of type Property, Slot, Port, Constraint)</p>
</div><h5 id="methods_startedit_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-startedit-page"><p>scope of the transclude directives or view section directive</p>
</div></td></tr><tr><td>mmsViewCtrl</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-startedit-page"><p>parent view directive controller</p>
</div></td></tr><tr><td>domElement</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-directives-utils-startedit-page"><p>dom of the directive, jquery wrapped</p>
</div></td></tr><tr><td>template</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="mms-directives-utils-startedit-page"><p>template to compile</p>
</div></td></tr><tr><td>doNotScroll</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-directives-utils-startedit-page"><p>whether to scroll to element</p>
</div></td></tr></tbody></table></div>
</li>
</ul>
</div>
</div>
