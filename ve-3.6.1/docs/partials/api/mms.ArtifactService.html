<h1><code ng:non-bindable="">ArtifactService</code>
<div><span class="hint">service in module <code ng:non-bindable="">mms</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="mms-artifactservice-page"><p>A service to add, get, bulk get and update/create artifacts, with caching</p>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/ng.$q">$q</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/ng.$http">$http</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.URLService">URLService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.UtilsService">UtilsService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.CacheService">CacheService</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/mms.HttpService">HttpService</a></code>
</li>
</ul>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_cacheartifact">cacheArtifact(reqOb, artifactOb, edit)</h3>
<div class="cacheartifact"><div class="mms-artifactservice-cacheartifact-page"><p>handles caching of artifact objects - in case the metadata of reqOb is different
from the artifact&#39;s canonical projectId/refId/commitId (due to being requested
from a different project context), it&#39;ll become an alias</p>
</div><h5 id="methods_cacheartifact_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>reqOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-cacheartifact-page"><p>request keys - {projectId, refId, artifactId, commitId, extended}</p>
</div></td></tr><tr><td>artifactOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-cacheartifact-page"><p>object to cache</p>
</div></td></tr><tr><td>edit</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-artifactservice-cacheartifact-page"><p>whether object to cache is for editing</p>
</div> <p><em>(default: false)</em></p></td></tr></tbody></table><h5 id="methods_cacheartifact_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-cacheartifact-page"><p>cached object</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_createartifact">createArtifact(reqOb)</h3>
<div class="createartifact"><div class="mms-artifactservice-createartifact-page"><p>Create artifact on mms.</p>
</div><h5 id="methods_createartifact_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>reqOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-createartifact-page"><p>see description of getArtifact, instead of artifactId,
&#39;artifact&#39; key should be the artifact object to create</p>
</div></td></tr></tbody></table><h5 id="methods_createartifact_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-artifactservice-createartifact-page"><p>The promise will be resolved with the created artifact
references if create is successful.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_getartifact">getArtifact(reqOb, weight, update)</h3>
<div class="getartifact"><div class="mms-artifactservice-getartifact-page"><p>Gets an artifact object by projectId and artifactId. If the artifact object is already in the cache,
resolve the existing reference, if not or update is true, request it from server, 
add/merge into the cache. </p>
<p>Most of these methods return promises that will reject with a reason object
when a server call fails, see
<a href="#/api/mms.URLService#methods_handlehttpstatus">the return object</a></p>
<h5 id="methods_getartifact_example-usage">Example Usage</h5>
<p> <pre class="prettyprint linenums">
        ArtifactService.getArtifact({
            projectId: 'projectId'
            artifactId: 'artifactId',
            refId: 'refId',         //default 'master'
        }).then(
            function(artifact) { //artifact is an artifact object (see json schema)
                alert('got ' + artifact.name);
            }, 
            function(reason) {
                alert('get artifact failed: ' + reason.message);
                //see mms.URLService#handleHttpStatus for the reason object
            }
        );
        </pre>
<h5 id="methods_getartifact_example-with-commitid">Example with commitId</h5>
<p> <pre class="prettyprint linenums">
        ArtifactService.getArtifact({
            projectId: 'projectId'
            artifactId: 'artifactId',
            refId: 'refId',         //default 'master'
            commitId: 'commitId',   //default 'latest'
        }).then(
            function(artifact) { //artifact is an artifact object (see json schema)
                alert('got ' + artifact.name);
            }, 
            function(reason) {
                alert('get artifact failed: ' + reason.message);
                //see mms.URLService#handleHttpStatus for the reason object
            }
        );
        </pre>
</div><h5 id="methods_getartifact_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>reqOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-getartifact-page"><p>object with keys as described in function description.</p>
</div></td></tr><tr><td>weight</td><td><a href="" class="label type-hint type-hint-integer">integer</a></td><td><div class="mms-artifactservice-getartifact-page"><p>priority of request (2 is immediate, 1 is normal, 0 is low)</p>
</div> <p><em>(default: 1)</em></p></td></tr><tr><td>update</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-artifactservice-getartifact-page"><p>(optional) whether to always get the latest
from server, even if it&#39;s already in cache (this will update the cache if exists)</p>
</div> <p><em>(default: false)</em></p></td></tr></tbody></table><h5 id="methods_getartifact_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-artifactservice-getartifact-page"><p>The promise will be resolved with the artifact object,
multiple calls to this method with the same parameters would give the
same object</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_getartifacthistory">getArtifactHistory(reqOb, weight, update)</h3>
<div class="getartifacthistory"><div class="mms-artifactservice-getartifacthistory-page"><p>Queries for an artifact&#39;s entire version history</p>
</div><h5 id="methods_getartifacthistory_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>reqOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-getartifacthistory-page"><p>see getArtifact</p>
</div></td></tr><tr><td>weight</td><td><a href="" class="label type-hint type-hint-integer">integer</a></td><td><div class="mms-artifactservice-getartifacthistory-page"><p>priority</p>
</div> <p><em>(default: 1)</em></p></td></tr><tr><td>update</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-artifactservice-getartifacthistory-page"><p>update from server</p>
</div> <p><em>(default: false)</em></p></td></tr></tbody></table><h5 id="methods_getartifacthistory_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-artifactservice-getartifacthistory-page"><p>The promise will be resolved with an array of commit objects.</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_getartifacts">getArtifacts(reqOb, weight, update)</h3>
<div class="getartifacts"><div class="mms-artifactservice-getartifacts-page"><p>Same as getArtifact, but for multiple ids.</p>
</div><h5 id="methods_getartifacts_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>reqOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-getartifacts-page"><p>keys - {projectId, refId, artifactIds (array of ids), commitId, extended}</p>
</div></td></tr><tr><td>weight</td><td><a href="" class="label type-hint type-hint-integer">integer</a></td><td><div class="mms-artifactservice-getartifacts-page"><p>priority of request (2 is immediate, 1 is normal, 0 is low)</p>
</div> <p><em>(default: 1)</em></p></td></tr><tr><td>update</td><td><a href="" class="label type-hint type-hint-boolean">boolean</a></td><td><div class="mms-artifactservice-getartifacts-page"><p>(optional) whether to always get the latest
from server, even if it&#39;s already in cache (this will update the cache if exists)</p>
</div> <p><em>(default: false)</em></p></td></tr></tbody></table><h5 id="methods_getartifacts_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-artifactservice-getartifacts-page"><p>The promise will be resolved with an array of artifact objects,
multiple calls to this method with the same parameters would give the
same objects</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_updateartifact">updateArtifact(artifactOb)</h3>
<div class="updateartifact"><div class="mms-artifactservice-updateartifact-page"><p>Save artifact to mms and update the cache if successful, the artifact object
must have an id, and whatever property that needs to be updated.</p>
<p><a href="#/api/mms.ArtifactService#methods_getelementforedit">see also getElementForEdit</a></p>
</div><h5 id="methods_updateartifact_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>artifactOb</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="mms-artifactservice-updateartifact-page"><p>An object that contains _projectId, _refId, sysmlId and any property changes to be saved.</p>
</div></td></tr></tbody></table><h5 id="methods_updateartifact_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="mms-artifactservice-updateartifact-page"><p>The promise will be resolved with the updated cache element reference if
update is successful. If a conflict occurs, the promise will be rejected with status of 409</p>
</div></td></tr></table></div>
</li>
</ul>
</div>
</div>
